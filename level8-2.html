<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boring Puzzle Game - Level 8: æ—¶é—´æ¡£æ¡ˆå®¤</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* å…¨å±€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e6e6e6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                    radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 80% 70%, rgba(255, 119, 97, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ç²’å­èƒŒæ™¯ */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* å…³å¡æ ‡é¢˜ */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            to { left: 100%; }
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff7a61, #6a5af9, #4dccbd);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .header h1 i {
            margin-right: 15px;
            animation: spin 20s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .header p {
            font-size: 1.2rem;
            color: #a9b7c6;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .game-description {
            background: rgba(106, 90, 249, 0.1);
            border-left: 4px solid #6a5af9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }

        /* æ¸¸æˆåŒºåŸŸ */
        .game-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 992px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        .main-game {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* æ—¶é—´æ¡£æ¡ˆå®¤ */
        .archive-room {
            position: relative;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .room-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #4dccbd;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .clocks-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 40px;
        }

        .clock-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .clock-title {
            font-size: 1.2rem;
            color: #ff7a61;
            text-align: center;
            font-weight: 600;
        }

        .clock-subtitle {
            font-size: 0.9rem;
            color: #a9b7c6;
            text-align: center;
        }

        /* æ—¶é’Ÿè®¾è®¡ */
        .clock {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: rgba(26, 26, 46, 0.8);
            border: 3px solid #6a5af9;
            position: relative;
            box-shadow:
                    0 0 20px rgba(106, 90, 249, 0.5),
                    inset 0 0 20px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .clock:hover {
            transform: scale(1.05);
            box-shadow:
                    0 0 30px rgba(106, 90, 249, 0.7),
                    inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .clock.active {
            animation: pulse-clock 2s infinite;
        }

        @keyframes pulse-clock {
            0%, 100% { box-shadow: 0 0 20px rgba(106, 90, 249, 0.5); }
            50% { box-shadow: 0 0 30px rgba(106, 90, 249, 0.8); }
        }

        .clock-center {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #ff7a61;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        .hour-hand, .minute-hand {
            position: absolute;
            background: #e6e6e6;
            border-radius: 5px;
            transform-origin: bottom center;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .hour-hand {
            width: 6px;
            height: 50px;
            top: 40px;
            left: 87px;
        }

        .minute-hand {
            width: 4px;
            height: 70px;
            top: 20px;
            left: 88px;
        }

        .clock-numbers {
            position: absolute;
            width: 100%;
            height: 100%;
            font-size: 1.2rem;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
        }

        .clock-number {
            position: absolute;
            width: 30px;
            height: 30px;
            text-align: center;
            line-height: 30px;
        }

        /* æ—¶é’Ÿæ§åˆ¶ */
        .clock-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 180px;
        }

        .time-slider {
            width: 100%;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            outline: none;
        }

        .time-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #6a5af9;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(106, 90, 249, 0.8);
        }

        .time-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #6a5af9;
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(106, 90, 249, 0.8);
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #a9b7c6;
        }

        .time-display {
            text-align: center;
            font-size: 1.3rem;
            color: #4dccbd;
            font-weight: bold;
            background: rgba(77, 204, 189, 0.1);
            padding: 8px;
            border-radius: 8px;
            margin-top: 10px;
        }

        /* æ¡£æ¡ˆè§£é”åŒº */
        .archive-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }

        .archive-item {
            width: 120px;
            height: 160px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .archive-item:hover {
            transform: translateY(-5px);
            border-color: rgba(106, 90, 249, 0.5);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .archive-item.locked {
            filter: grayscale(0.8);
            opacity: 0.7;
            cursor: not-allowed;
        }

        .archive-item.locked:hover {
            transform: none;
            border-color: rgba(255, 255, 255, 0.1);
        }

        .archive-item.unlocked {
            border-color: #4dccbd;
            background: rgba(77, 204, 189, 0.1);
            animation: unlock-pulse 2s infinite;
        }

        @keyframes unlock-pulse {
            0%, 100% { box-shadow: 0 0 10px rgba(77, 204, 189, 0.5); }
            50% { box-shadow: 0 0 20px rgba(77, 204, 189, 0.8); }
        }

        .archive-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #6a5af9;
        }

        .archive-item.locked .archive-icon {
            color: #555;
        }

        .archive-item.unlocked .archive-icon {
            color: #4dccbd;
        }

        .archive-name {
            font-size: 1rem;
            text-align: center;
            padding: 0 10px;
        }

        .archive-status {
            position: absolute;
            bottom: 10px;
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.5);
        }

        .archive-item.locked .archive-status {
            background: rgba(231, 76, 60, 0.3);
            color: #e74c3c;
        }

        .archive-item.unlocked .archive-status {
            background: rgba(46, 204, 113, 0.3);
            color: #2ecc71;
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            gap: 25px;
            animation: fadeInUp 0.8s ease-out 0.4s both;
        }

        .panel-section {
            background: rgba(26, 26, 46, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .panel-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #ff7a61;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* æ—¶é—´çº¿ */
        .timeline {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            position: relative;
            margin: 20px 0;
        }

        .timeline-progress {
            position: absolute;
            height: 100%;
            background: linear-gradient(90deg, #6a5af9, #4dccbd);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .timeline-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ff7a61;
            border-radius: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 122, 97, 0.8);
            transition: all 0.3s ease;
        }

        .timeline-marker:hover {
            transform: translate(-50%, -50%) scale(1.2);
        }

        .timeline-marker.active {
            background: #4dccbd;
            box-shadow: 0 0 15px rgba(77, 204, 189, 1);
        }

        .timeline-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #a9b7c6;
        }

        /* è°œé¢˜æç¤º */
        .puzzle-hints {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .hint-item {
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border-left: 3px solid #6a5af9;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .hint-item:hover {
            background: rgba(255, 255, 255, 0.07);
            transform: translateX(5px);
        }

        .hint-item.revealed {
            border-left-color: #4dccbd;
            background: rgba(77, 204, 189, 0.1);
        }

        .hint-icon {
            font-size: 1.2rem;
            color: #6a5af9;
        }

        .hint-item.revealed .hint-icon {
            color: #4dccbd;
        }

        /* æ§åˆ¶æŒ‰é’® */
        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .game-btn {
            padding: 15px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            border: none;
            font-weight: 600;
            background: linear-gradient(135deg, #6a5af9, #4dccbd);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .game-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .game-btn:hover::before {
            left: 100%;
        }

        .game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(106, 90, 249, 0.3);
        }

        .game-btn:active {
            transform: translateY(0);
        }

        .game-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
        }

        .game-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .game-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* å¯¼èˆªåŒºåŸŸ */
        .nav-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            animation: fadeInUp 0.8s ease-out 0.6s both;
        }

        @media (max-width: 768px) {
            .nav-area {
                flex-direction: column;
                gap: 20px;
            }
        }

        .nav-btn {
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border: none;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            min-width: 200px;
        }

        @media (max-width: 768px) {
            .nav-btn {
                width: 100%;
                max-width: 300px;
            }
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .nav-info {
            text-align: center;
        }

        .nav-info p {
            color: #a9b7c6;
        }

        .nav-info strong {
            color: #4dccbd;
            font-size: 1.2rem;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 40px;
            border-radius: 25px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            border: 1px solid rgba(106, 90, 249, 0.5);
            box-shadow:
                    0 20px 50px rgba(0, 0, 0, 0.5),
                    0 0 0 1px rgba(106, 90, 249, 0.1);
            animation: modalAppear 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
        }

        @keyframes modalAppear {
            from { transform: scale(0.8) translateY(50px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 2rem;
            cursor: pointer;
            color: #a9b7c6;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: #ff7a61;
        }

        .modal h2 {
            color: #4dccbd;
            margin-bottom: 20px;
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .modal p {
            color: #a9b7c6;
            margin-bottom: 25px;
            font-size: 1.2rem;
            line-height: 1.8;
        }

        .modal-img {
            max-width: 200px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .modal-btn {
            padding: 16px 40px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            border: none;
            font-weight: 600;
            background: linear-gradient(135deg, #6a5af9, #4dccbd);
            color: white;
            margin-top: 20px;
        }

        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(106, 90, 249, 0.3);
        }

        .success-animation {
            font-size: 3rem;
            margin: 30px 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .funny-text {
            color: #ff7a61;
            font-weight: bold;
            font-size: 1.3rem;
            font-style: italic;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 122, 97, 0.1);
            border-radius: 10px;
        }

        /* æ—¶é—´ç‰¹æ•ˆ */
        .time-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .time-effect.active {
            opacity: 0.7;
        }

        .time-ripple {
            position: absolute;
            border-radius: 50%;
            border: 2px solid rgba(77, 204, 189, 0.7);
            animation: ripple 1.5s ease-out infinite;
        }

        @keyframes ripple {
            from { transform: scale(0); opacity: 1; }
            to { transform: scale(2); opacity: 0; }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }

            .clocks-container {
                gap: 20px;
            }

            .clock {
                width: 140px;
                height: 140px;
            }

            .hour-hand {
                height: 40px;
                top: 30px;
                left: 67px;
            }

            .minute-hand {
                height: 55px;
                top: 15px;
                left: 68px;
            }

            .clock-numbers {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .clock {
                width: 120px;
                height: 120px;
            }

            .hour-hand {
                height: 35px;
                top: 25px;
                left: 57px;
            }

            .minute-hand {
                height: 45px;
                top: 15px;
                left: 58px;
            }
        }
    </style>
</head>
<body>
<!-- ç²’å­èƒŒæ™¯ -->
<div id="particles-js"></div>

<div class="container">
    <!-- å…³å¡æ ‡é¢˜ -->
    <header class="header">
        <h1><i class="fas fa-clock"></i> å…³å¡ 8: æ—¶é—´æ¡£æ¡ˆå®¤</h1>
        <p>è°ƒæ•´ä¸‰ä¸ªä¸åŒæ—¶é—´çš„æ—¶é’Ÿï¼Œè§£å¼€æ—¶é—´æ¡£æ¡ˆå®¤çš„ç§˜å¯†ã€‚æ¯ä¸ªæ—¶é’Ÿå¿…é¡»æŒ‡å‘æ­£ç¡®çš„æ—¶é—´æ‰èƒ½è§£é”å¯¹åº”çš„æ¡£æ¡ˆã€‚</p>
        <div class="game-description">
            <p><strong>ç©æ³•è¯´æ˜ï¼š</strong> 1. ä½¿ç”¨æ»‘å—è°ƒæ•´æ¯ä¸ªæ—¶é’Ÿçš„æ—¶é—´ â†’ 2. å½“ä¸‰ä¸ªæ—¶é’Ÿéƒ½æŒ‡å‘æ­£ç¡®æ—¶é—´æ—¶ï¼Œæ¡£æ¡ˆä¼šè‡ªåŠ¨è§£é” â†’ 3. ç‚¹å‡»è§£é”çš„æ¡£æ¡ˆæŸ¥çœ‹å†…å®¹ â†’ 4. å…¨éƒ¨è§£é”åé€šå…³</p>
        </div>
    </header>

    <!-- æ¸¸æˆä¸»åŒºåŸŸ -->
    <div class="game-area">
        <!-- ä¸»æ¸¸æˆåŒº -->
        <section class="main-game">
            <div class="archive-room">
                <div class="room-title">
                    <i class="fas fa-archive"></i> æ—¶é—´æ¡£æ¡ˆå®¤
                </div>

                <!-- ä¸‰ä¸ªæ—¶é’Ÿ -->
                <div class="clocks-container">
                    <!-- è¿‡å»æ—¶é’Ÿ -->
                    <div class="clock-wrapper">
                        <div class="clock-title">è¿‡å»</div>
                        <div class="clock" id="past-clock" data-time="08:15">
                            <div class="clock-center"></div>
                            <div class="hour-hand" id="past-hour"></div>
                            <div class="minute-hand" id="past-minute"></div>
                            <div class="clock-numbers" id="past-numbers"></div>
                        </div>
                        <div class="clock-subtitle">è°ƒæ•´åˆ°æ—©é¤æ—¶é—´</div>
                        <div class="clock-controls">
                            <input type="range" min="0" max="11" value="8" class="time-slider" id="past-hour-slider">
                            <div class="slider-label">
                                <span>0æ—¶</span>
                                <span>11æ—¶</span>
                            </div>
                            <input type="range" min="0" max="55" step="5" value="15" class="time-slider" id="past-minute-slider">
                            <div class="slider-label">
                                <span>0åˆ†</span>
                                <span>55åˆ†</span>
                            </div>
                            <div class="time-display" id="past-time">08:15</div>
                        </div>
                    </div>

                    <!-- ç°åœ¨æ—¶é’Ÿ -->
                    <div class="clock-wrapper">
                        <div class="clock-title">ç°åœ¨</div>
                        <div class="clock" id="present-clock" data-time="14:30">
                            <div class="clock-center"></div>
                            <div class="hour-hand" id="present-hour"></div>
                            <div class="minute-hand" id="present-minute"></div>
                            <div class="clock-numbers" id="present-numbers"></div>
                        </div>
                        <div class="clock-subtitle">è°ƒæ•´åˆ°ä¸‹åˆèŒ¶æ—¶é—´</div>
                        <div class="clock-controls">
                            <input type="range" min="0" max="11" value="2" class="time-slider" id="present-hour-slider">
                            <div class="slider-label">
                                <span>0æ—¶</span>
                                <span>11æ—¶</span>
                            </div>
                            <input type="range" min="0" max="55" step="5" value="30" class="time-slider" id="present-minute-slider">
                            <div class="slider-label">
                                <span>0åˆ†</span>
                                <span>55åˆ†</span>
                            </div>
                            <div class="time-display" id="present-time">02:30</div>
                        </div>
                    </div>

                    <!-- æœªæ¥æ—¶é’Ÿ -->
                    <div class="clock-wrapper">
                        <div class="clock-title">æœªæ¥</div>
                        <div class="clock" id="future-clock" data-time="21:45">
                            <div class="clock-center"></div>
                            <div class="hour-hand" id="future-hour"></div>
                            <div class="minute-hand" id="future-minute"></div>
                            <div class="clock-numbers" id="future-numbers"></div>
                        </div>
                        <div class="clock-subtitle">è°ƒæ•´åˆ°ç¡å‰æ—¶é—´</div>
                        <div class="clock-controls">
                            <input type="range" min="0" max="11" value="9" class="time-slider" id="future-hour-slider">
                            <div class="slider-label">
                                <span>0æ—¶</span>
                                <span>11æ—¶</span>
                            </div>
                            <input type="range" min="0" max="55" step="5" value="45" class="time-slider" id="future-minute-slider">
                            <div class="slider-label">
                                <span>0åˆ†</span>
                                <span>55åˆ†</span>
                            </div>
                            <div class="time-display" id="future-time">09:45</div>
                        </div>
                    </div>
                </div>

                <!-- æ—¶é—´ç‰¹æ•ˆ -->
                <div class="time-effect" id="time-effect"></div>

                <!-- æ¡£æ¡ˆè§£é”åŒº -->
                <div class="room-title" style="margin-top: 20px;">
                    <i class="fas fa-unlock-alt"></i> æ—¶é—´æ¡£æ¡ˆ
                </div>
                <div class="archive-container">
                    <!-- è¿‡å»æ¡£æ¡ˆ -->
                    <div class="archive-item locked" id="past-archive" data-target="past">
                        <i class="fas fa-scroll archive-icon"></i>
                        <div class="archive-name">è¿‡å»æ¡£æ¡ˆ</div>
                        <div class="archive-status">å·²é”å®š</div>
                    </div>

                    <!-- ç°åœ¨æ¡£æ¡ˆ -->
                    <div class="archive-item locked" id="present-archive" data-target="present">
                        <i class="fas fa-book archive-icon"></i>
                        <div class="archive-name">ç°åœ¨æ¡£æ¡ˆ</div>
                        <div class="archive-status">å·²é”å®š</div>
                    </div>

                    <!-- æœªæ¥æ¡£æ¡ˆ -->
                    <div class="archive-item locked" id="future-archive" data-target="future">
                        <i class="fas fa-crystal-ball archive-icon"></i>
                        <div class="archive-name">æœªæ¥æ¡£æ¡ˆ</div>
                        <div class="archive-status">å·²é”å®š</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ§åˆ¶é¢æ¿ -->
        <aside class="control-panel">
            <!-- æ—¶é—´çº¿ -->
            <div class="panel-section">
                <div class="panel-title">
                    <i class="fas fa-stream"></i> æ—¶é—´çº¿è¿›åº¦
                </div>
                <div class="timeline">
                    <div class="timeline-progress" id="timeline-progress"></div>
                    <div class="timeline-marker" id="marker-past" style="left: 33%;"></div>
                    <div class="timeline-marker" id="marker-present" style="left: 66%;"></div>
                    <div class="timeline-marker" id="marker-future" style="left: 100%;"></div>
                </div>
                <div class="timeline-labels">
                    <span>è¿‡å»</span>
                    <span>ç°åœ¨</span>
                    <span>æœªæ¥</span>
                </div>
                <div style="text-align: center; margin-top: 15px;">
                    <div id="progress-text">å·²è§£é”: 0/3 ä¸ªæ¡£æ¡ˆ</div>
                </div>
            </div>

            <!-- è°œé¢˜æç¤º -->
            <div class="panel-section">
                <div class="panel-title">
                    <i class="fas fa-lightbulb"></i> è°œé¢˜æç¤º
                </div>
                <div class="puzzle-hints">
                    <div class="hint-item" id="hint-1">
                        <i class="fas fa-question-circle hint-icon"></i>
                        <span>æ¯ä¸ªæ—¶é’Ÿéœ€è¦è°ƒæ•´åˆ°ç‰¹å®šæ—¶é—´</span>
                    </div>
                    <div class="hint-item" id="hint-2">
                        <i class="fas fa-question-circle hint-icon"></i>
                        <span>è¿‡å»æ—¶é’Ÿçš„æ—¶é—´æ˜¯æ—©é¤æ—¶é—´</span>
                    </div>
                    <div class="hint-item" id="hint-3">
                        <i class="fas fa-question-circle hint-icon"></i>
                        <span>ç°åœ¨æ—¶é’Ÿçš„æ—¶é—´æ˜¯ä¸‹åˆèŒ¶æ—¶é—´</span>
                    </div>
                    <div class="hint-item" id="hint-4">
                        <i class="fas fa-question-circle hint-icon"></i>
                        <span>æœªæ¥æ—¶é’Ÿçš„æ—¶é—´æ˜¯ç¡å‰æ—¶é—´</span>
                    </div>
                </div>
            </div>

            <!-- æ§åˆ¶æŒ‰é’® -->
            <div class="panel-section">
                <div class="panel-title">
                    <i class="fas fa-gamepad"></i> æ§åˆ¶
                </div>
                <div class="control-buttons">
                    <button class="game-btn" id="check-btn">
                        <i class="fas fa-check-circle"></i> æ£€æŸ¥æ—¶é—´
                    </button>
                    <button class="game-btn secondary" id="hint-btn">
                        <i class="fas fa-lightbulb"></i> æ˜¾ç¤ºæç¤º
                    </button>
                    <button class="game-btn secondary" id="reset-btn">
                        <i class="fas fa-redo"></i> é‡ç½®æ—¶é—´
                    </button>
                </div>
            </div>
        </aside>
    </div>

    <!-- å¯¼èˆªåŒºåŸŸ -->
    <footer class="nav-area">
        <button class="nav-btn" id="prev-level">
            <i class="fas fa-arrow-left"></i> è¿”å›å…³å¡é€‰æ‹©
        </button>

        <div class="nav-info">
            <p><strong>Boring Puzzle Game</strong> - å…³å¡ 8</p>
            <p>æ—¶é—´æ“æ§è§£è°œ</p>
        </div>

        <button class="nav-btn" id="next-level" disabled>
            ä¸‹ä¸€å…³ <i class="fas fa-arrow-right"></i>
        </button>
    </footer>
</div>

<!-- æˆåŠŸé€šå…³æ¨¡æ€æ¡† -->
<div class="modal" id="success-modal">
    <div class="modal-content">
        <span class="close-modal" id="close-success">&times;</span>
        <h2><i class="fas fa-trophy"></i> æ—¶é—´æ¡£æ¡ˆå·²å…¨éƒ¨è§£é”ï¼</h2>
        <p>ä½ æˆåŠŸè°ƒæ•´äº†æ‰€æœ‰æ—¶é’Ÿï¼Œè§£å¼€äº†æ—¶é—´æ¡£æ¡ˆå®¤çš„ç§˜å¯†ï¼</p>
        <div class="success-animation">â° ğŸ—ï¸ ğŸ‰</div>
        <p class="funny-text">ã€Œç¬¬å…«å…³å®Œæˆï¼æ—¶é—´æ°¸è¿œå‘å‰ï¼Œä½†è‡³å°‘ä½ æŒæ§äº†è¿™ä¸€åˆ»ï½ã€</p>
        <p>ä½ è·å¾—äº†æ—¶é—´ç®¡ç†å¤§å¸ˆçš„ç§°å·ï¼</p>
        <button class="modal-btn" id="continue-btn">
            <i class="fas fa-forward"></i> ç»§ç»­æ—…ç¨‹
        </button>
    </div>
</div>

<!-- æ¡£æ¡ˆå†…å®¹æ¨¡æ€æ¡† -->
<div class="modal" id="archive-modal">
    <div class="modal-content">
        <span class="close-modal" id="close-archive">&times;</span>
        <h2 id="archive-modal-title"><i class="fas fa-archive"></i> æ—¶é—´æ¡£æ¡ˆ</h2>
        <div id="archive-modal-content">
            <!-- åŠ¨æ€å†…å®¹ -->
        </div>
        <button class="modal-btn" id="close-archive-btn">
            <i class="fas fa-times"></i> å…³é—­
        </button>
    </div>
</div>

<!-- ç²’å­èƒŒæ™¯åº“ -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

<script>
    // Level 8 æ¸¸æˆé€»è¾‘ - æ—¶é—´æ¡£æ¡ˆå®¤
    document.addEventListener('DOMContentLoaded', function() {
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            pastTime: { hour: 8, minute: 15 },
            presentTime: { hour: 2, minute: 30 },
            futureTime: { hour: 9, minute: 45 },
            pastCorrect: { hour: 8, minute: 0 },   // æ—©é¤æ—¶é—´ 8:00
            presentCorrect: { hour: 2, minute: 30 }, // ä¸‹åˆèŒ¶æ—¶é—´ 14:30 (2:30 PM)
            futureCorrect: { hour: 9, minute: 0 },   // ç¡å‰æ—¶é—´ 21:00 (9:00 PM)
            unlockedArchives: [],
            isCompleted: false,
            hintsUsed: 0,
            maxHints: 3
        };

        // åˆå§‹åŒ–ç²’å­èƒŒæ™¯
        particlesJS('particles-js', {
            particles: {
                number: { value: 60, density: { enable: true, value_area: 800 } },
                color: { value: "#6a5af9" },
                shape: { type: "circle" },
                opacity: { value: 0.5, random: true },
                size: { value: 3, random: true },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: "#4dccbd",
                    opacity: 0.2,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 1,
                    direction: "none",
                    random: true,
                    straight: false,
                    out_mode: "out",
                    bounce: false
                }
            },
            interactivity: {
                detect_on: "canvas",
                events: {
                    onhover: { enable: true, mode: "repulse" },
                    onclick: { enable: true, mode: "push" }
                }
            }
        });

        // åˆå§‹åŒ–æ—¶é’Ÿæ•°å­—
        function initClockNumbers() {
            const clocks = ['past', 'present', 'future'];
            clocks.forEach(clock => {
                const numbersContainer = document.getElementById(`${clock}-numbers`);
                for (let i = 1; i <= 12; i++) {
                    const angle = (i - 3) * 30 * Math.PI / 180;
                    const radius = 70;
                    const x = 90 + radius * Math.cos(angle);
                    const y = 90 + radius * Math.sin(angle);

                    const numberDiv = document.createElement('div');
                    numberDiv.className = 'clock-number';
                    numberDiv.textContent = i === 0 ? '12' : i;
                    numberDiv.style.left = `${x - 15}px`;
                    numberDiv.style.top = `${y - 15}px`;
                    numbersContainer.appendChild(numberDiv);
                }
            });
        }

        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        function updateClockTime(clock, hour, minute) {
            const hourHand = document.getElementById(`${clock}-hour`);
            const minuteHand = document.getElementById(`${clock}-minute`);
            const timeDisplay = document.getElementById(`${clock}-time`);

            // è®¡ç®—è§’åº¦
            const hourAngle = (hour % 12) * 30 + minute * 0.5;
            const minuteAngle = minute * 6;

            // åº”ç”¨æ—‹è½¬
            hourHand.style.transform = `rotate(${hourAngle}deg)`;
            minuteHand.style.transform = `rotate(${minuteAngle}deg)`;

            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            const formattedHour = hour.toString().padStart(2, '0');
            const formattedMinute = minute.toString().padStart(2, '0');
            timeDisplay.textContent = `${formattedHour}:${formattedMinute}`;

            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            if (clock === 'past') {
                gameState.pastTime = { hour, minute };
            } else if (clock === 'present') {
                gameState.presentTime = { hour, minute };
            } else if (clock === 'future') {
                gameState.futureTime = { hour, minute };
            }

            // æ£€æŸ¥æ˜¯å¦è§£é”æ¡£æ¡ˆ
            checkArchiveUnlock(clock);

            // æ›´æ–°æ—¶é—´çº¿è¿›åº¦
            updateTimelineProgress();

            // åˆ›å»ºæ—¶é—´ç‰¹æ•ˆ
            createTimeEffect(clock);
        }

        // åˆ›å»ºæ—¶é—´ç‰¹æ•ˆ
        function createTimeEffect(clock) {
            const effectContainer = document.getElementById('time-effect');
            const clockElement = document.getElementById(`${clock}-clock`);
            const rect = clockElement.getBoundingClientRect();

            // åˆ›å»ºæ¶Ÿæ¼ªæ•ˆæœ
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const ripple = document.createElement('div');
                    ripple.className = 'time-ripple';
                    ripple.style.left = `${rect.left + rect.width / 2}px`;
                    ripple.style.top = `${rect.top + rect.height / 2}px`;
                    ripple.style.width = '10px';
                    ripple.style.height = '10px';
                    effectContainer.appendChild(ripple);

                    // ç§»é™¤æ¶Ÿæ¼ª
                    setTimeout(() => {
                        ripple.remove();
                    }, 1500);
                }, i * 200);
            }

            // æ¿€æ´»ç‰¹æ•ˆå®¹å™¨
            effectContainer.classList.add('active');
            setTimeout(() => {
                effectContainer.classList.remove('active');
            }, 1000);
        }

        // æ£€æŸ¥æ¡£æ¡ˆæ˜¯å¦è§£é”
        function checkArchiveUnlock(clock) {
            const archiveElement = document.getElementById(`${clock}-archive`);
            let isCorrect = false;

            if (clock === 'past') {
                isCorrect = gameState.pastTime.hour === gameState.pastCorrect.hour &&
                    gameState.pastTime.minute === gameState.pastCorrect.minute;
            } else if (clock === 'present') {
                isCorrect = gameState.presentTime.hour === gameState.presentCorrect.hour &&
                    gameState.presentTime.minute === gameState.presentCorrect.minute;
            } else if (clock === 'future') {
                isCorrect = gameState.futureTime.hour === gameState.futureCorrect.hour &&
                    gameState.futureTime.minute === gameState.futureCorrect.minute;
            }

            if (isCorrect && !gameState.unlockedArchives.includes(clock)) {
                // è§£é”æ¡£æ¡ˆ
                gameState.unlockedArchives.push(clock);
                archiveElement.classList.remove('locked');
                archiveElement.classList.add('unlocked');
                archiveElement.querySelector('.archive-status').textContent = 'å·²è§£é”';

                // æ’­æ”¾è§£é”éŸ³æ•ˆ
                playSound('unlock');

                // æ˜¾ç¤ºè§£é”æ¶ˆæ¯
                showMessage(`${clock === 'past' ? 'è¿‡å»' : clock === 'present' ? 'ç°åœ¨' : 'æœªæ¥'}æ¡£æ¡ˆå·²è§£é”ï¼`, 'success');

                // æ›´æ–°æ—¶é—´çº¿æ ‡è®°
                document.getElementById(`marker-${clock}`).classList.add('active');

                // æ£€æŸ¥æ˜¯å¦å…¨éƒ¨è§£é”
                if (gameState.unlockedArchives.length === 3) {
                    completeLevel();
                }
            } else if (!isCorrect && gameState.unlockedArchives.includes(clock)) {
                // é‡æ–°é”å®šæ¡£æ¡ˆ
                const index = gameState.unlockedArchives.indexOf(clock);
                if (index > -1) {
                    gameState.unlockedArchives.splice(index, 1);
                }
                archiveElement.classList.remove('unlocked');
                archiveElement.classList.add('locked');
                archiveElement.querySelector('.archive-status').textContent = 'å·²é”å®š';
                document.getElementById(`marker-${clock}`).classList.remove('active');
            }
        }

        // æ›´æ–°æ—¶é—´çº¿è¿›åº¦
        function updateTimelineProgress() {
            const progress = (gameState.unlockedArchives.length / 3) * 100;
            document.getElementById('timeline-progress').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `å·²è§£é”: ${gameState.unlockedArchives.length}/3 ä¸ªæ¡£æ¡ˆ`;
        }

        // æ’­æ”¾éŸ³æ•ˆ
        function playSound(type) {
            // è¿™é‡Œå¯ä»¥ä½¿ç”¨Web Audio APIæˆ–ç®€å•çš„éŸ³é¢‘å…ƒç´ 
            // ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨ç³»ç»Ÿå£°éŸ³
            try {
                if (type === 'unlock') {
                    const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQ=');
                    audio.volume = 0.3;
                    audio.play();
                } else if (type === 'success') {
                    const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQ=');
                    audio.volume = 0.5;
                    audio.play();
                }
            } catch (e) {
                console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥:", e);
            }
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text, type = "info") {
            // åˆ›å»ºæ¶ˆæ¯å…ƒç´ 
            const messageEl = document.createElement('div');
            messageEl.textContent = text;
            messageEl.style.cssText = `
                    position: fixed;
                    top: 30px;
                    left: 50%;
                    transform: translateX(-50%);
                    padding: 15px 25px;
                    border-radius: 10px;
                    z-index: 9999;
                    font-weight: 600;
                    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
                    font-size: 1.1rem;
                    animation: fadeInOut 3s ease;
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255,255,255,0.1);
                `;

            // æ ¹æ®ç±»å‹è®¾ç½®é¢œè‰²
            if (type === 'error') {
                messageEl.style.backgroundColor = 'rgba(231, 76, 60, 0.9)';
                messageEl.style.color = 'white';
                messageEl.style.borderLeft = '5px solid #c0392b';
            } else if (type === 'success') {
                messageEl.style.backgroundColor = 'rgba(46, 204, 113, 0.9)';
                messageEl.style.color = 'white';
                messageEl.style.borderLeft = '5px solid #27ae60';
            } else if (type === 'warning') {
                messageEl.style.backgroundColor = 'rgba(243, 156, 18, 0.9)';
                messageEl.style.color = 'white';
                messageEl.style.borderLeft = '5px solid #e67e22';
            } else {
                messageEl.style.backgroundColor = 'rgba(52, 152, 219, 0.9)';
                messageEl.style.color = 'white';
                messageEl.style.borderLeft = '5px solid #2980b9';
            }

            // æ·»åŠ åŠ¨ç”»æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                    @keyframes fadeInOut {
                        0% { opacity: 0; transform: translate(-50%, -20px); }
                        10% { opacity: 1; transform: translate(-50%, 0); }
                        90% { opacity: 1; transform: translate(-50%, 0); }
                        100% { opacity: 0; transform: translate(-50%, -20px); }
                    }
                `;
            document.head.appendChild(style);

            document.body.appendChild(messageEl);

            // 3ç§’åç§»é™¤
            setTimeout(() => {
                messageEl.style.opacity = '0';
                messageEl.style.transition = 'opacity 0.5s';
                setTimeout(() => {
                    document.body.removeChild(messageEl);
                    document.head.removeChild(style);
                }, 500);
            }, 3000);
        }

        // å®Œæˆå…³å¡
        function completeLevel() {
            gameState.isCompleted = true;

            // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
            playSound('success');

            // æ˜¾ç¤ºæˆåŠŸæ¨¡æ€æ¡†
            setTimeout(() => {
                document.getElementById('success-modal').style.display = 'flex';
            }, 1000);

            // å¯ç”¨ä¸‹ä¸€å…³æŒ‰é’®
            document.getElementById('next-level').disabled = false;

            // ä¿å­˜è¿›åº¦åˆ°æœ¬åœ°å­˜å‚¨
            try {
                localStorage.setItem('boringPuzzle_level8_completed', 'true');
                localStorage.setItem('boringPuzzle_currentLevel', '9');
            } catch (e) {
                console.log("æœ¬åœ°å­˜å‚¨ä¸å¯ç”¨");
            }

            showMessage("æ­å–œï¼æ—¶é—´æ¡£æ¡ˆå®¤å·²å…¨éƒ¨è§£é”ï¼", "success");
        }

        // æ˜¾ç¤ºæç¤º
        function showHint() {
            if (gameState.hintsUsed >= gameState.maxHints) {
                showMessage("æç¤ºæ¬¡æ•°å·²ç”¨å®Œ", "warning");
                return;
            }

            gameState.hintsUsed++;

            // æ˜¾ç¤ºä¸€ä¸ªéšæœºæç¤º
            const hintElements = document.querySelectorAll('.hint-item:not(.revealed)');
            if (hintElements.length > 0) {
                const randomIndex = Math.floor(Math.random() * hintElements.length);
                const hintElement = hintElements[randomIndex];
                hintElement.classList.add('revealed');

                // éœ‡åŠ¨åé¦ˆ
                if ('vibrate' in navigator) {
                    navigator.vibrate(50);
                }

                showMessage(`æç¤º ${gameState.hintsUsed}/${gameState.maxHints}: ${hintElement.querySelector('span').textContent}`, "info");
            } else {
                showMessage("æ‰€æœ‰æç¤ºéƒ½å·²æ˜¾ç¤º", "info");
            }
        }

        // æ˜¾ç¤ºæ¡£æ¡ˆå†…å®¹
        function showArchiveContent(archive) {
            const modal = document.getElementById('archive-modal');
            const title = document.getElementById('archive-modal-title');
            const content = document.getElementById('archive-modal-content');

            let archiveTitle = '';
            let archiveContent = '';

            if (archive === 'past') {
                archiveTitle = 'è¿‡å»æ¡£æ¡ˆ - æ—©é¤æ—¶é—´';
                archiveContent = `
                        <p><strong>è®°å½•æ—¶é—´ï¼š</strong>08:00 AM</p>
                        <p><strong>æ¡£æ¡ˆå†…å®¹ï¼š</strong></p>
                        <p>æ¸…æ™¨çš„é˜³å…‰é€è¿‡çª—å¸˜ï¼Œæ¡Œä¸Šæ‘†ç€çƒ­è…¾è…¾çš„æ—©é¤ã€‚è¿™æ˜¯ä¸€å¤©ä¸­æœ€å®é™çš„æ—¶åˆ»ï¼Œå……æ»¡äº†å¸Œæœ›å’Œå¯èƒ½æ€§ã€‚</p>
                        <p class="funny-text">ã€Œæ®è¯´æ—©é¤åƒå¾—å¥½ï¼Œè§£è°œæ²¡çƒ¦æ¼ï½ã€</p>
                        <p><em>æ—¶é—´å°è®°ï¼šè¿‡å»çš„ç¾å¥½æ€»æ˜¯å€¼å¾—å›å¿†ã€‚</em></p>
                    `;
            } else if (archive === 'present') {
                archiveTitle = 'ç°åœ¨æ¡£æ¡ˆ - ä¸‹åˆèŒ¶æ—¶é—´';
                archiveContent = `
                        <p><strong>è®°å½•æ—¶é—´ï¼š</strong>02:30 PM</p>
                        <p><strong>æ¡£æ¡ˆå†…å®¹ï¼š</strong></p>
                        <p>åˆåçš„æ‚ é—²æ—¶å…‰ï¼Œä¸€æ¯èŒ¶ï¼Œä¸€å—ç‚¹å¿ƒï¼Œæš‚æ—¶é€ƒç¦»å¿™ç¢Œçš„ç”Ÿæ´»ã€‚æ­¤åˆ»çš„å¹³é™æ˜¯ç»™æœªæ¥çš„è‡ªå·±æœ€å¥½çš„ç¤¼ç‰©ã€‚</p>
                        <p class="funny-text">ã€Œä¸‹åˆèŒ¶æ—¶é—´åˆ°ï¼ä¼‘æ¯ä¸€ä¸‹ï¼Œè§£è°œæ•ˆç‡æ›´é«˜ï½ã€</p>
                        <p><em>æ—¶é—´å°è®°ï¼šå½“ä¸‹çš„æ¯ä¸€åˆ»éƒ½å€¼å¾—çæƒœã€‚</em></p>
                    `;
            } else if (archive === 'future') {
                archiveTitle = 'æœªæ¥æ¡£æ¡ˆ - ç¡å‰æ—¶é—´';
                archiveContent = `
                        <p><strong>è®°å½•æ—¶é—´ï¼š</strong>09:00 PM</p>
                        <p><strong>æ¡£æ¡ˆå†…å®¹ï¼š</strong></p>
                        <p>å¤œæ™šçš„å®é™ï¼Œä¸€å¤©çš„ç»“æŸã€‚å›é¡¾ä»Šå¤©çš„æˆå°±ï¼Œè§„åˆ’æ˜å¤©çš„ç›®æ ‡ã€‚æœªæ¥å……æ»¡æœªçŸ¥ï¼Œä½†ä¹Ÿå……æ»¡å¸Œæœ›ã€‚</p>
                        <p class="funny-text">ã€Œç¡å‰è§£è°œæœ‰åŠ©äºæé«˜ç¡çœ è´¨é‡ï¼ˆå¯èƒ½å§ï¼‰ï½ã€</p>
                        <p><em>æ—¶é—´å°è®°ï¼šæœªæ¥çš„å¯èƒ½ç”±ç°åœ¨çš„æ¯ä¸€æ­¥å†³å®šã€‚</em></p>
                    `;
            }

            title.innerHTML = `<i class="fas fa-archive"></i> ${archiveTitle}`;
            content.innerHTML = archiveContent;
            modal.style.display = 'flex';
        }

        // é‡ç½®æ—¶é—´
        function resetTimes() {
            if (confirm("ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ—¶é’Ÿçš„æ—¶é—´å—ï¼Ÿ")) {
                // é‡ç½®æ»‘å—
                document.getElementById('past-hour-slider').value = 8;
                document.getElementById('past-minute-slider').value = 15;
                document.getElementById('present-hour-slider').value = 2;
                document.getElementById('present-minute-slider').value = 30;
                document.getElementById('future-hour-slider').value = 9;
                document.getElementById('future-minute-slider').value = 45;

                // æ›´æ–°æ—¶é—´
                updateClockTime('past', 8, 15);
                updateClockTime('present', 2, 30);
                updateClockTime('future', 9, 45);

                showMessage("æ—¶é—´å·²é‡ç½®", "info");
            }
        }

        // æ£€æŸ¥æ—¶é—´
        function checkTimes() {
            let message = "æ—¶é—´æ£€æŸ¥ç»“æœï¼š\n";
            let allCorrect = true;

            // æ£€æŸ¥è¿‡å»æ—¶é—´
            if (gameState.pastTime.hour === gameState.pastCorrect.hour &&
                gameState.pastTime.minute === gameState.pastCorrect.minute) {
                message += "âœ“ è¿‡å»æ—¶é—´æ­£ç¡®\n";
            } else {
                message += "âœ— è¿‡å»æ—¶é—´ä¸æ­£ç¡®\n";
                allCorrect = false;
            }

            // æ£€æŸ¥ç°åœ¨æ—¶é—´
            if (gameState.presentTime.hour === gameState.presentCorrect.hour &&
                gameState.presentTime.minute === gameState.presentCorrect.minute) {
                message += "âœ“ ç°åœ¨æ—¶é—´æ­£ç¡®\n";
            } else {
                message += "âœ— ç°åœ¨æ—¶é—´ä¸æ­£ç¡®\n";
                allCorrect = false;
            }

            // æ£€æŸ¥æœªæ¥æ—¶é—´
            if (gameState.futureTime.hour === gameState.futureCorrect.hour &&
                gameState.futureTime.minute === gameState.futureCorrect.minute) {
                message += "âœ“ æœªæ¥æ—¶é—´æ­£ç¡®\n";
            } else {
                message += "âœ— æœªæ¥æ—¶é—´ä¸æ­£ç¡®\n";
                allCorrect = false;
            }

            if (allCorrect) {
                showMessage("æ‰€æœ‰æ—¶é—´éƒ½æ­£ç¡®ï¼æ¡£æ¡ˆå·²å…¨éƒ¨è§£é”ï¼", "success");
            } else {
                showMessage(message, "info");
            }
        }

        // äº‹ä»¶ç›‘å¬å™¨åˆå§‹åŒ–
        function initEventListeners() {
            // æ»‘å—äº‹ä»¶
            const sliders = [
                { id: 'past-hour-slider', clock: 'past', type: 'hour' },
                { id: 'past-minute-slider', clock: 'past', type: 'minute' },
                { id: 'present-hour-slider', clock: 'present', type: 'hour' },
                { id: 'present-minute-slider', clock: 'present', type: 'minute' },
                { id: 'future-hour-slider', clock: 'future', type: 'hour' },
                { id: 'future-minute-slider', clock: 'future', type: 'minute' }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                element.addEventListener('input', function() {
                    const clock = slider.clock;
                    let hour, minute;

                    if (clock === 'past') {
                        hour = parseInt(document.getElementById('past-hour-slider').value);
                        minute = parseInt(document.getElementById('past-minute-slider').value);
                    } else if (clock === 'present') {
                        hour = parseInt(document.getElementById('present-hour-slider').value);
                        minute = parseInt(document.getElementById('present-minute-slider').value);
                    } else if (clock === 'future') {
                        hour = parseInt(document.getElementById('future-hour-slider').value);
                        minute = parseInt(document.getElementById('future-minute-slider').value);
                    }

                    updateClockTime(clock, hour, minute);
                });
            });

            // æ¡£æ¡ˆç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.archive-item').forEach(item => {
                item.addEventListener('click', function() {
                    if (this.classList.contains('locked')) {
                        showMessage("æ¡£æ¡ˆå°šæœªè§£é”", "warning");
                        return;
                    }

                    const archive = this.id.replace('-archive', '');
                    showArchiveContent(archive);
                });
            });

            // æŒ‰é’®äº‹ä»¶
            document.getElementById('check-btn').addEventListener('click', checkTimes);
            document.getElementById('hint-btn').addEventListener('click', showHint);
            document.getElementById('reset-btn').addEventListener('click', resetTimes);

            // å¯¼èˆªæŒ‰é’®
            document.getElementById('prev-level').addEventListener('click', function() {
                if (confirm("è¿”å›å…³å¡é€‰æ‹©é¡µé¢ï¼Ÿ")) {
                    window.location.href = "level8.html";
                }
            });

            document.getElementById('next-level').addEventListener('click', function() {
                if (!gameState.isCompleted) {
                    showMessage("è¯·å…ˆå®Œæˆå½“å‰å…³å¡", "warning");
                    return;
                }

                window.location.href = "level9.html";
            });

            // æ¨¡æ€æ¡†å…³é—­æŒ‰é’®
            document.getElementById('close-success').addEventListener('click', function() {
                document.getElementById('success-modal').style.display = 'none';
            });

            document.getElementById('close-archive').addEventListener('click', function() {
                document.getElementById('archive-modal').style.display = 'none';
            });

            document.getElementById('continue-btn').addEventListener('click', function() {
                document.getElementById('success-modal').style.display = 'none';
            });

            document.getElementById('close-archive-btn').addEventListener('click', function() {
                document.getElementById('archive-modal').style.display = 'none';
            });

            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });

            // é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', function(event) {
                // Ré”®é‡ç½®
                if (event.code === 'KeyR' && event.ctrlKey) {
                    event.preventDefault();
                    resetTimes();
                }

                // Hé”®æç¤º
                if (event.code === 'KeyH') {
                    event.preventDefault();
                    showHint();
                }

                // Cé”®æ£€æŸ¥
                if (event.code === 'KeyC' && event.ctrlKey) {
                    event.preventDefault();
                    checkTimes();
                }

                // æ•°å­—é”®1-3è·³è½¬åˆ°å¯¹åº”æ—¶é’Ÿ
                if (event.code >= 'Digit1' && event.code <= 'Digit3') {
                    const index = parseInt(event.code.replace('Digit', ''));
                    const clocks = ['past', 'present', 'future'];
                    if (index >= 1 && index <= 3) {
                        const clockId = clocks[index-1];
                        const clockElement = document.getElementById(`${clockId}-clock`);
                        clockElement.scrollIntoView({ behavior: 'smooth', block: 'center' });

                        // æ·»åŠ é«˜äº®æ•ˆæœ
                        clockElement.classList.add('active');
                        setTimeout(() => {
                            clockElement.classList.remove('active');
                        }, 2000);
                    }
                }
            });
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            initClockNumbers();
            initEventListeners();

            // åˆå§‹æ›´æ–°æ—¶é—´
            updateClockTime('past', 8, 15);
            updateClockTime('present', 2, 30);
            updateClockTime('future', 9, 45);

            // æ›´æ–°æ—¶é—´çº¿
            updateTimelineProgress();

            console.log('Level 8 - æ—¶é—´æ¡£æ¡ˆå®¤ åˆå§‹åŒ–å®Œæˆ');

            // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            setTimeout(() => {
                showMessage("æ¬¢è¿æ¥åˆ°æ—¶é—´æ¡£æ¡ˆå®¤ï¼è°ƒæ•´æ—¶é’Ÿè§£é”æ¡£æ¡ˆå§ï¼", "info");
            }, 1000);
        }

        // å¯åŠ¨æ¸¸æˆ
        initGame();
    });
</script>
</body>
</html>